{% extends "template.html" %}

{% block page_content %}

<div class="wrappers">

<script>
  function goBack() {
    window.history.back();
  }
  </script>
<button onclick="goBack()" style="float: right;">Go Back</button>


<div class="wrappers">
  <div class="containersssss">
    <div class="row">
      <div class="col-xs-3">
        <label> Choose the plot type....</label>
        <select class="form-control" id='first_cat'>
          <option value="Bar">Bar</option>
          <option value="Scatter">Double barplot</option>
        </select>
      </div>
      <div class="col-md-6">
        <div class="chart" id="bargraph">
          <script>
            var graphs = {{ plot | safe}};
            Plotly.plot('bargraph', graphs, {});
          </script>
        </div>
      </div>
    </div>
  </div>
  <script src="{{ url_for('static', filename='js/upload.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery-1.11.1.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/plots.js') }}"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>


{% if len is defined %}
{% for i in range(0, len) %}
  <h2> Transcription {{i+1}}</h2>
  <center><audio src="{{ filepaths[i] }}" controls> </audio></center>
  <br></br>
  <div class="header">
    <!--<h3 class="text-muted">Transcription</h3>-->
    <center><textarea id="text-val" rows="10" cols="75">{{output[i]}}</textarea></center>
    <center><input type="button" id="dwn-btn" value="Download (.txt)" /></center>
    <br></br>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script>
    // Start file download.
    document.getElementById("dwn-btn").addEventListener("click", function () {
      // Generate download of hello.txt file with some content
      var text = document.getElementById("text-val").value;
      var filename = "Transcription.txt";

      download(filename, text);
    }, false);
  </script>

  <form method="GET" action="/result">
    <div align="center" id="mainselection">
      <select name="mask" class="form-control" id="picDD">
        <option selected>Select the image to represent the wordcloud</option>
        {% for i in range(0, length_mask) %}
        <option value="{{i}}">{{masks[i]}}</option>
        {% endfor %}
      </select>
    </div>
    <script>
      var imagesArray = [
        "data:image/png;base64,{{clouds[i]}}",
        "data:image/png;base64,{{clouds1[i]}}", // represents val 0,
        "data:image/png;base64,{{clouds2[i]}}", // 1,
        "data:image/png;base64,{{clouds3[i]}}"  // 2 ...
      ];

      $('#picDD').change(function () {
        $('#image')[0].src = imagesArray[this.value];
      });
    </script>

    <center>
      <div class="maintainers">
        <img id="image" src="data:image/png;base64,{{clouds[i]}}" class="galimage" style="width:500px;height:500px;"
          onerror="hideImage(this);" />
      </div>
    </center>

    <center>
      <div class="maintainer">
        <img src="data:image/png;base64,{{graphs[i]}}" class="galimage" onerror="hideImage(this);" />
      </div>
    </center>
    {% endfor %}
    {% endif %}


<br></br>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
    /*Scroll to top when arrow up clicked BEGIN*/
    $(window).scroll(function() {
        var height = $(window).scrollTop();
        if (height > 100) {
            $('#back2Top').fadeIn();
        } else {
            $('#back2Top').fadeOut();
        }
    });
    $(document).ready(function() {
        $("#back2Top").click(function(event) {
            event.preventDefault();
            $("html, body").animate({ scrollTop: 0 }, "slow");
            return false;
        });
    
    });
     /*Scroll to top when arrow up clicked END*/
    </script>
        <a id="back2Top" title="Back to top" href="#">&#10148;</a>
    {% endblock %}

</div>
</form>