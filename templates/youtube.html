{% extends "template.html" %}
{% block title %}File Uploader{% endblock %}

{% block page_content %}

<head>
  <meta charset="utf-8">
  <title>Multiple Files Upload</title>
  <link href="static/css/app.css" rel="stylesheet" type="text/css">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.fileupload.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.fileupload-ui.css') }}">
  <link rel="stylesheet" href="http://blueimp.github.io/Gallery/css/blueimp-gallery.min.css">
  <script src="static/js/upload.js"></script>

</head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
  $(document).ready(function () {
    $('#btn-example-file-reset').on('click', function () {
      $('#example-file').val('');
    });
  });
</script>

<div class="containerz">
  <h2>Select YouTube video</h2>
  <p>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul class=flashes>
      {% for message in messages %}
      <li>{{ message }}</li>
      {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}
  </p>
  <form method="POST" action="/youtube" enctype="multipart/form-data">
    <dl>
      <p>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

        <div class="input-group-1" style="text-align: center;">
          <span contenteditable="true">
            <label>Text box</label>
            <input type="text" name="Text" id="myText" value="" />
            <a href="#" data-toggle="tooltip"
              title="Please upload your YouTube music video link (e.g. https://www.youtube.com/watch?v=mw5VIEIvuMI)">?</a>
        </div>
      </p>
    </dl>
    <div class="upload-btn-wrapper" style="text-align: center;">
      <label class="btn btn-default btn-file">
        Submit <input type="submit" value="Youtube" id="submit" name="Analyze" style="display: none;">
      </label>
    </div>
  </p>
</form>
</hr>


  <!--</div> 
</p> -->

  <br>
  <!--<blockquote>
      <p>File Upload widget with multiple file selection, drag&amp;drop support, progress bars, validation and preview images, audio and video for jQuery.<br>
      Supports cross-domain, chunked and resumable file uploads and client-side image resizing.<br>

  </blockquote>-->
  </br>

  <h2>File Uploader</h2>
  <!--class="md-form"-->
  <!-- <form  id = "fileupload" method="POST" action="/youtube" enctype="multipart/form-data"> -->
  <form method="POST" action="/youtube" enctype="multipart/form-data">
    <dl>
      <p class="big">

        <div class="input-group">
          <span class="input-group-btn">
            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">Add
              files...</span>
            <input name="file[]" id="example-file" multiple="true" autocomplete="off" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());"
              style="display: none;" type="file">
            <a href="#" data-toggle="tooltip" title="Please upload an audio file">?</a>
          </span>
          <span id = "form-control" class="form-control"></span>
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
          <script>
          var input_file = $("#example-file");
          input_file.on("change", function () {
              var files = input_file.prop("files")
              var names = $.map(files, function (val) { return val.name; });
              $('#form-control').show().text('Filenames: ' + names);
              });
          </script> 
          <div id="filedrag">or drop files here</div>

        </div>
        <div class="upload-btn-wrapper" style="text-align: center;">
          <label class="btn btn-default btn-file"> <i class="glyphicon glyphicon-upload"></i>
            Start Upload <input type="submit" value="File" name="Analyze" style="display: none;">
          </label>
          <label class="btn btn-default btn-file"> 
            <div id="submitbutton">
          <i class="glyphicon glyphicon-ban-circle"></i>Delete
          <input type="button" value = "Delete">
        </div>
        </label>
        </div>
        <div class="custom-select" style="width:200px;">
          <select>
            <option value="0">Select Language:</option>
            <option value="1">English</option>
            <option value="2">French</option>
            <option value="3">Chinese</option>
            <option value="4">Spanish</option>
          </select>
        </div>

        <div id="messages">
          <p>Status Messages</p>
          </div>
        <script>
          var x, i, j, selElmnt, a, b, c;
          /*look for any elements with the class "custom-select":*/
          x = document.getElementsByClassName("custom-select");
          for (i = 0; i < x.length; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];
            /*for each element, create a new DIV that will act as the selected item:*/
            a = document.createElement("DIV");
            a.setAttribute("class", "select-selected");
            a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
            x[i].appendChild(a);
            /*for each element, create a new DIV that will contain the option list:*/
            b = document.createElement("DIV");
            b.setAttribute("class", "select-items select-hide");
            for (j = 1; j < selElmnt.length; j++) {
              /*for each option in the original select element,
              create a new DIV that will act as an option item:*/
              c = document.createElement("DIV");
              c.innerHTML = selElmnt.options[j].innerHTML;
              c.addEventListener("click", function(e) {
                  /*when an item is clicked, update the original select box,
                  and the selected item:*/
                  var y, i, k, s, h;
                  s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                  h = this.parentNode.previousSibling;
                  for (i = 0; i < s.length; i++) {
                    if (s.options[i].innerHTML == this.innerHTML) {
                      s.selectedIndex = i;
                      h.innerHTML = this.innerHTML;
                      y = this.parentNode.getElementsByClassName("same-as-selected");
                      for (k = 0; k < y.length; k++) {
                        y[k].removeAttribute("class");
                      }
                      this.setAttribute("class", "same-as-selected");
                      break;
                    }
                  }
                  h.click();
              });
              b.appendChild(c);
            }
            x[i].appendChild(b);
            a.addEventListener("click", function(e) {
                /*when the select box is clicked, close any other select boxes,
                and open/close the current select box:*/
                e.stopPropagation();
                closeAllSelect(this);
                this.nextSibling.classList.toggle("select-hide");
                this.classList.toggle("select-arrow-active");
              });
          }
          function closeAllSelect(elmnt) {
            /*a function that will close all select boxes in the document,
            except the current select box:*/
            var x, y, i, arrNo = [];
            x = document.getElementsByClassName("select-items");
            y = document.getElementsByClassName("select-selected");
            for (i = 0; i < y.length; i++) {
              if (elmnt == y[i]) {
                arrNo.push(i)
              } else {
                y[i].classList.remove("select-arrow-active");
              }
            }
            for (i = 0; i < x.length; i++) {
              if (arrNo.indexOf(i)) {
                x[i].classList.add("select-hide");
              }
            }
          }
          /*if the user clicks anywhere outside the select box,
          then close all select boxes:*/
          document.addEventListener("click", closeAllSelect);
          </script>
      </p>

    </dl>
    </form>
    <hr />

  <div class="containerxx">
    {% if len is defined %}
      <form method="POST" action="/result">
        <input type="submit"  name="subject" value="Results" style="text-align: center;" class = "bagels"></input>
      </form>
    {% endif %}

    {% if text is defined %}
    <!--<div class="contain">-->
      <form method="POST" action="/result_yt">
        <input name="subjectss" type="submit" value="Results" style="text-align: center;" class = "bagels"></input>
      </form>
    {% endif %}
  </div>
  

  <br>
  <div class="panel panel-default">
      <div class="panel-heading">
          <h3 class="panel-title">Notes</h3>
      </div>
      <div class="panel-body">
          <ul>
              <li>The maximum file size for uploads in this demo is <strong>50 MB</strong> (default file size is unlimited).</li>
              <li>Only audio files (<strong>WAV, MP3, FLAC, OGG, and M4A</strong>) are allowed in this website.</li>
              
              <li>You can <strong>drag &amp; drop</strong> files from your desktop on this webpage.</li>
          </ul>
      </div>
  </div>
</div>
{% endblock %}
