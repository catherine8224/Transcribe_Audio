<!--<!DOCTYPE html>
<title>Upload new File</title>
<h1>Upload new File</h1>
<form method="POST" enctype=multipart/form-data>
  <input type=file name=file>
  <input type=submit value=Upload>
</form> 
</html> -->

<!DOCTYPE html>
<html lang="en-us" dir="ltr">
{% extends "template.html" %}
{% block content %}
  <head>
    <meta charset="utf-8">
    <title>Upload Recording</title>
    <link href="static/css/app.css" rel="stylesheet" type="text/css">
    <script src="static/translate.js"></script>
    <script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
    type="text/javascript"></script>
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script>
  function translateLanguage(lang) {

      var $frame = $('.goog-te-menu-frame:first');
      if (!$frame.size()) {
          alert("Error: Could not find Google translate frame.");
          return false;
      }
      $frame.contents().find('.goog-te-menu2-item span.text:contains(' + lang + ')').get(0).click();
      return false;
  }
</script>

  </head>

<!--<header></header>-->
<body>
  <h1>Upload Recording</h1>

  <title>Upload New File</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="static/upload.js"></script>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<h2>Select a file to upload</h2>

<form method="POST" action="/upload_form" enctype="multipart/form-data">
    <dl>
		<p class= "big">
      <!--<div class="upload-btn-wrapper" style="text-align: center;">
        <input type="file" id = "file-upload" name="file" style="display: none;" multiple required> 
        <label for="file-upload" class="btn btn-default btn-file">
          Browse </label>
          <div id = "file-upload-filename"></div>-->
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
          <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet"/>
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
          
          <div class="input-group">
            <span class="input-group-btn">
              <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">Browse</span>
              <input name="file" autocomplete="off" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());" style="display: none;" type="file">
            </span>
            <span class="form-control"></span>
          </div>
      <a href="#" data-toggle="tooltip" title="Please upload an audio file">?</a>
		</p>
    </dl>
    <p>
      <div class="upload-btn-wrapper" style="text-align: center;">
        <label class="btn btn-default btn-file">
          Submit <input type="submit" style="display: none;">
      </label>
  </div> 
   </p>
  </form>
  <p id="result">Translate: 
  <select id="lang-drop">
    <option value="#" selected>--None--</option>
    <option value ="#bn"> Bengali </option>
    <option value="#fil">Tagalog</option>
    <option value="#zh-cn">Chinese</option>
    <option value="#es">Spanish</option>
  </select></p>
  <div class="progress">
    <div id = "progressBar" class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
      0%
    </div>
  </div>
  <p>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
      <ul class=flashes>
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
      </ul>
      {% endif %}
    {% endwith %}
  </p>

  <center><h3> Transcription: </h3></center>
  <center><textarea id="text-val" rows="10" cols="50">{{output}}</textarea><br/></center>
  <center><input type="button" id="dwn-btn" value="Download dynamically generated text file"/></center>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
// Start file download.
document.getElementById("dwn-btn").addEventListener("click", function(){
	// Generate download of hello.txt file with some content
	var text = document.getElementById("text-val").value;
	var filename = "Transcription.txt";
	
	download(filename, text);
}, false);
</script>


  <script>
  function hideImage(img)
{
   img.style.display = "none";
}
  </script>
  <br>
  <img src="data:image/png;base64,{{article}}" class = "galimage" style="width:500px;height:500px;" onerror="hideImage(this);" />
  <img src="data:image/png;base64,{{graph}}" class = "galimage" style="width:500px;height:500px;" onerror="hideImage(this);" />
</br>
  <a href="https://github.com/hunter-classes/winter-2020-codefest-submissions-the-procrastinators">
  <img style="position: absolute; bottom: 0; right: 0; border: 0;" src="https://media3.giphy.com/media/Y01wot3Bt9Bpdz8xvs/source.gif" width="200" height="200" alt="Fork me on GitHub" data-canonical-src="https://media3.giphy.com/media/Y01wot3Bt9Bpdz8xvs/source.gif">
  </a>

{% endblock %}
</body>
</html>